;
(function ($, window, document, undefined) {
var XhMarquee = function (ele, options) {
this.wrapBox = ele;
this.mParams = options;
// console.log(options);
}
XhMarquee.prototype = {
init: function (params) {
var that = this;
that.buildDom();
},
// 构建基本元素结构
buildDom: function () {
var that = this;
that.warpBox = $('<div class="xh-marquee-box js-xh-marquee-box clearfix"></div>');

var domStr = '<ul>';
    if (that.mParams.barrage) {
    domStr = '<ul class="barrage-ul">';
        }
        for (var i = 0; i < that.mParams.list.length; i++) { var curItem=that.mParams.list[i]; if
            (that.mParams.barrage) { domStr +=' <li>' + '<img src="' + curItem.userImg + '">' + '<span>' +
            curItem.userName + '刚刚加入了会员</span>' + '</li>' ; } else { domStr +=' <li>' + '<img src="' + curItem.userImg
            + '">' + '<span>' + curItem.userName + '</span>' + '</li>' ; } } domStr +='</ul>' ;
            that.warpBox.html(domStr); if (that.mParams.barrage) { that.warpBox.find('ul li').before('<li style="visibility: hidden;">
            </li>');
            }
            // console.log(that.warpBox);
            that.wrapBox.append(that.warpBox);
            that.scrollAnimation();
            },
            // 开启滚动动画
            scrollAnimation: function () {
            var that = this;
            var times = setInterval(function () {
            that.wrapBox.find('ul').animate({
            "top": -that.wrapBox.height()
            }, 800, function () {
            $(this).css({
            top: "0px"
            }).find("li:first").appendTo(this);
            });
            }, that.mParams.speedTime || 3000);
            },
            constructor: XhMarquee
            }

            $.fn.xhMarquee = function (options) {
            var xhMarquee = new XhMarquee(this, options);
            return xhMarquee.init();
            };
            })(jQuery, window, document);



            $(function (params) {
            var list = [{
            userName: '云南**',
            userImg:
            'http://www.ixiangha.com:9807/images/mo/webapp/activity/vipGuideRechargeNew/h4.jpg?vs=20170522111111123'
            },
            {
            userName: '云南**',
            userImg:
            'http://www.ixiangha.com:9807/images/mo/webapp/activity/vipGuideRechargeNew/h4.jpg?vs=20170522111111123'
            }
            ];
            $('.js-marquee-box').xhMarquee({
            list:list,
            speedTime:3000,
            barrage:false,
            });
            });



            .xh-marquee-box{position:relative;width:100%;height:.357143rem;line-height:.357143rem;font-size:.107143rem;overflow:hidden}.xh-marquee-box
            ul{display:inline-table;position:relative;top:0;left:0;color:#444;font-weight:700;margin:0
            .053571rem}.xh-marquee-box ul.barrage-ul
            li{background-color:rgba(26,26,26,.6);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0
            .093571rem 0 .053571rem;border-radius:.178571rem}.xh-marquee-box ul.barrage-ul
            span{font-size:.106667rem;color:#c6c6c6}.xh-marquee-box ul
            li{height:.357143rem;line-height:.357143rem;-webkit-box-sizing:border-box;box-sizing:border-box}.xh-marquee-box
            ul li img{display:inline-block;width:.214286rem;height:.214286rem;border:1px solid
            #fff;border-radius:50%;vertical-align:middle}