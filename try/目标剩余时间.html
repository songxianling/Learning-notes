<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<span id="show">Loading...</span>
		<script type="text/javascript">
			//time_val 比对的时间 格式如2016-12-14 22:55:40
			function countDown(time_val) {
				var www_qsyz_net = /^[\d]{4}-[\d]{1,2}-[\d]{1,2}( [\d]{1,2}:[\d]{1,2}(:[\d]{1,2})?)?$/ig,
					str = '',
					conn, s;
				if(!time_val.match(www_qsyz_net)) {
					alert('参数格式为2012-01-01[ 01:01[:01]].\r其中[]内的内容可省略');
					return false;
				}
				var sec = (new Date(time_val.replace(/-/ig, '/')).getTime() - new Date().getTime()) / 1000;
				if(sec > 0) {
					conn = ' 还有 ';
				} else {
					conn = ' 已过去 ';
					sec *= -1;
				}
				s = { '天': sec / 24 / 3600};
				for(i in s) {
					if(Math.floor(s[i]) > 0) str += Math.floor(s[i]) + i;
				}
				if(Math.floor(sec) == 0) { str = '0秒'; }
				document.getElementById('show').innerHTML = '距离 <u>' + time_val + '</u>' + conn + '<u>' + str + '</u>';
				//每隔一秒更新
//				setTimeout(function() { countDown(time_val) }, 1000);
				countDown(time_val) 
			}
			countDown('2017-4-30');
		</script>
	</body>

</html>